# Claude 4 プロンプトエンジニアリングのベストプラクティス

> Claude 4モデルに最適なプロンプトエンジニアリング手法

このガイドでは、Claude 4モデル（Opus 4およびSonnet 4）向けの特定のプロンプトエンジニアリング技術を提供し、アプリケーションで最適な結果を得るのに役立ちます。これらのモデルは、以前のClaudeモデルよりも正確な指示に従うように訓練されています。

## 一般原則

### 指示を明示的に行う

Claude 4モデルは、明確で明示的な指示に適切に応答します。希望する出力について具体的に指定することで、結果を向上させることができます。以前のClaudeモデルの「期待以上の」動作を求めるお客様は、Claude 4ではこれらの動作をより明示的に要求する必要があるかもしれません。

<Accordion title="例：分析ダッシュボードの作成">
  **あまり効果的でない例：**

  ```text
  分析ダッシュボードを作成する
  ```

  **より効果的な例：**

  ```text
  分析ダッシュボードを作成してください。可能な限り多くの関連機能やインタラクションを含めてください。基本を超えて、完全な機能を備えた実装を作成してください。
  ```
</Accordion>

### コンテキストを追加してパフォーマンスを向上させる

指示の背景や動機を提供すること（例えば、そのような動作が重要である理由をClaudeに説明するなど）は、Claude 4があなたの目標をより良く理解し、より的確な応答を提供するのに役立ちます。

<Accordion title="例：フォーマット設定の好み">
  **あまり効果的でない例：**

  ```text
  省略記号を絶対に使用しないでください
  ```

  **より効果的な例：**

  ```text
  あなたの回答はテキスト読み上げエンジンによって音読されるため、テキスト読み上げエンジンが発音方法を知らないので、省略記号を絶対に使用しないでください。
  ```
</Accordion>

Claudeは説明から一般化するのに十分賢いです。

### 例と詳細に注意する

Claude 4モデルは、指示に従う一環として詳細と例に注意を払います。あなたの例が促進したい行動と一致し、避けたい行動を最小限に抑えるようにしてください。

## 特定の状況に関するガイダンス

### 応答のフォーマットを制御する

Claude 4モデルの出力フォーマットを誘導するのに特に効果的であることがわかっているいくつかの方法があります：

1. **Claudeに何をしないかではなく、何をすべきかを伝える**

   * 「回答にマークダウンを使用しないでください」ではなく
   * 「回答は滑らかに流れる散文の段落で構成されるべきです」と試してみてください。

2. **XML形式のインジケータを使用する**

   * 「回答の散文部分を\<smoothly\_flowing\_prose\_paragraphs>タグ内に記述してください」と試してみてください。

3. **プロンプトスタイルを希望する出力に合わせる**

   プロンプトで使用するフォーマットスタイルがClaudeの応答スタイルに影響を与える可能性があります。出力フォーマットの操作性に問題がまだある場合は、できる限りプロンプトスタイルを希望する出力スタイルに合わせることをお勧めします。例えば、プロンプトからマークダウンを削除すると、出力のマークダウンの量を減らすことができます。

### 思考および交互思考機能を活用する

Claude 4は、ツール使用後の振り返りや複雑な多段階推論を含むタスクに特に役立つ思考機能を提供します。より良い結果を得るために、初期または交互思考を導くことができます。

```text 例示プロンプト
ツールの結果を受け取った後、その品質を慎重に検討し、次に進む前に最適な次のステップを決定してください。この新しい情報に基づいて計画し、反復するために思考を使用し、最善の次のアクションを取ってください。
```

<Info>
  思考機能の詳細については、[拡張思考](/ja/docs/build-with-claude/extended-thinking)を参照してください。
</Info>

### 並列ツール呼び出しの最適化

Claude 4モデルは並列ツール実行に優れています。プロンプトなしでも並列ツール呼び出しを使用する成功率が高いですが、少しのプロンプトを追加することで、この動作の成功率を約100%に高めることができます。次のプロンプトが最も効果的であることがわかっています：

```text エージェント用のサンプルプロンプト
最大の効率を得るために、複数の独立した操作を実行する必要がある場合は、順次ではなく、関連するすべてのツールを同時に呼び出してください。
```

### エージェントコーディングでのファイル作成を減らす

Claude 4モデルは、特にコードを扱う際に、テストや反復のために新しいファイルを作成することがあります。このアプローチにより、Claudeは特にPythonスクリプトなどのファイルを、最終出力を保存する前の「一時的なスクラッチパッド」として使用できます。一時ファイルを使用することで、特にエージェントコーディングのユースケースでの結果を改善できます。

新しいファイル作成を最小限に抑えたい場合は、Claudeに後片付けをするよう指示できます：

```text サンプルプロンプト
反復のために一時的な新しいファイル、スクリプト、またはヘルパーファイルを作成した場合は、タスクの最後にこれらのファイルを削除してクリーンアップしてください。
```

### ビジュアルおよびフロントエンドコード生成の強化

フロントエンドコード生成では、明示的な奨励を提供することで、Claude 4モデルが複雑で詳細かつインタラクティブなデザインを作成するよう導くことができます：

```text サンプルプロンプト
遠慮せずに、全力を尽くしてください。
```

また、追加の修飾子や焦点を当てるべき点に関する詳細を提供することで、特定の分野でのClaudeのフロントエンドパフォーマンスを向上させることができます：

* 「可能な限り多くの関連機能とインタラクションを含めてください」
* 「ホバー状態、トランジション、マイクロインタラクションなどの思慮深い詳細を追加してください」
* 「ウェブ開発能力を示す印象的なデモを作成してください」
* 「デザイン原則を適用してください：階層、コントラスト、バランス、動き」


### ccusage のBashコマンド

今日のClaude消費トークン量を取得、過剰になっていないかチェックするスラッシュコマンドです



```markdown
---

allowed-tools: Bash

description: Run the ccusage package by itself to visualize Claude's consumption tokens.

---

# task

Refer to today's consumption tokens to check for excessive consumption.

## bash command

- Display Daily Report : !`npx ccusage@latest daily`
```

